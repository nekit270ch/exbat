# exbat
ExBAT - компилятор, расширяющий возможности языка BAT-файлов:
- Простое объявление функций
- Улучшенный синтаксис условного оператора
- Подключение библиотек
- Мелкие улучшения (отключение вывода и т.д.)

## Командная строка
`exbat <путь к файлу>` - скомпилировать скрипт ExBAT в обычный BAT-файл. Предполагается, что файл имеет расширение `.exb`.

## Синтаксис
### Переменные
Для получения значения переменной, помимо символов `%%` и `!!`, ExBAT позволяет использовать `$`:  
`echo $USERNAME`

### Отключение вывода команд
`noout(команда)` - аналогично `команда > nul`  
`noerror(команда)` - аналогично `команда 2> nul`  
`quiet(команда)` - аналогично `команда > nul 2> nul`  

### Условный оператор
Оператор if можно использовать так:
```
set /p "number=Введите число: "

if($number < 10)
    echo Меньше 10
else if($number < 20)
    echo Меньше 20
else
    echo Больше или равно 20
end if
```
Условие пишется в круглых скобках, в условии доступны обычные операторы сравнения (`<`, `>`, `<=`, `>=`)

### Функции
В ExBAT упрощено объявление функций, для этого можно использовать следующую конструкцию:
```
function test(foo, bar)
    echo Аргумент foo: $foo
    echo Аргумент bar: $bar
end function
```

Вызов функции производится так: `test("Первый аргумент", "Второй аргумент")`

Для маркировки, что аргумент - имя переменной, куда функция записывает результат, можно использовать префикс `out`:
```
include(math)
pow(3, 2, out result)
echo 3 во второй степени равно $result.
```
### Комментарии
Комментарии могут начинаться с символов `#` или `//`:
```
# Комментарий
// Тоже комментарий
```
### Отключение ExBAT
Если на каком-то участке скрипта необходимо отключить обработку кода, этот участок можно ограничить блоком `purebatch`:
```
purebatch
// Код на чистом Batch
end purebatch
```
### Замена перед компиляцией
С помощью оператора `define` можно заменить текст на другой перед компиляцией. Это полезно, например, для объявления констант.
```
define(VERSION, 1.0)

echo Версия: VERSION
```
### Подключение библиотек
Библиотеки ExBAT - это скрипты, находящиеся в папке `[путь_к_компилятору]\lib`. Их можно подключить оператором `include`:
```
include(example_library)

function_from_library()
```
<!--## Стандартные библиотеки
### `math`-->
